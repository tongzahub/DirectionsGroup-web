/**
 * Theme Toggle Component Styles
 * Apple-inspired smooth morphing animations between light and dark states
 */

/* Base theme toggle styles */
.theme-toggle {
  @apply relative inline-flex items-center gap-3;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

.theme-toggle-skeleton {
  @apply bg-gray-200 dark:bg-gray-700 rounded-full animate-pulse;
}

/* Switch variant styles */
.theme-toggle--switch {
  @apply flex items-center gap-3;
}

.theme-toggle-switch {
  @apply relative inline-flex items-center justify-center;
  @apply focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2;
  @apply focus-visible:ring-blue-500 dark:focus-visible:ring-blue-400;
  @apply transition-all duration-200 ease-out;
  @apply disabled:opacity-50 disabled:cursor-not-allowed;
  border-radius: 9999px;
  background: transparent;
  border: none;
  padding: 2px;
}

.theme-toggle-track {
  @apply relative flex items-center justify-between;
  @apply bg-gray-200 dark:bg-gray-700;
  @apply border border-gray-300 dark:border-gray-600;
  @apply transition-all duration-300 ease-out;
  border-radius: 9999px;
  width: 52px;
  height: 28px;
  padding: 2px;
}

.theme-toggle-thumb {
  @apply relative flex items-center justify-center;
  @apply bg-white dark:bg-gray-800;
  @apply border border-gray-200 dark:border-gray-600;
  @apply shadow-sm dark:shadow-lg;
  @apply transition-all duration-300 ease-out;
  @apply transform translate-x-0;
  border-radius: 50%;
  width: 22px;
  height: 22px;
  z-index: 2;
}

/* Dark mode thumb position */
[data-theme="dark"] .theme-toggle-thumb {
  @apply translate-x-6;
}

/* Button and icon variant styles */
.theme-toggle--button,
.theme-toggle--icon {
  @apply inline-flex items-center gap-2 px-3 py-2;
  @apply bg-gray-100 dark:bg-gray-800;
  @apply border border-gray-200 dark:border-gray-700;
  @apply rounded-lg transition-all duration-200 ease-out;
  @apply hover:bg-gray-200 dark:hover:bg-gray-700;
  @apply focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2;
  @apply focus-visible:ring-blue-500 dark:focus-visible:ring-blue-400;
  @apply disabled:opacity-50 disabled:cursor-not-allowed;
}

.theme-toggle--icon {
  @apply p-2;
}

/* Size variants */
.theme-toggle--sm .theme-toggle-track {
  width: 44px;
  height: 24px;
}

.theme-toggle--sm .theme-toggle-thumb {
  width: 18px;
  height: 18px;
}

.theme-toggle--sm [data-theme="dark"] .theme-toggle-thumb {
  @apply translate-x-5;
}

.theme-toggle--lg .theme-toggle-track {
  width: 60px;
  height: 32px;
}

.theme-toggle--lg .theme-toggle-thumb {
  width: 26px;
  height: 26px;
}

.theme-toggle--lg [data-theme="dark"] .theme-toggle-thumb {
  @apply translate-x-7;
}

/* Position variants */
.theme-toggle--floating {
  @apply fixed bottom-6 right-6 z-50;
  @apply bg-white dark:bg-gray-900;
  @apply border border-gray-200 dark:border-gray-700;
  @apply rounded-full shadow-lg dark:shadow-2xl;
  @apply p-3;
}

/* Label styles */
.theme-toggle-label {
  @apply text-sm font-medium;
  @apply text-gray-700 dark:text-gray-300;
  @apply transition-colors duration-200 ease-out;
  user-select: none;
}

/* Icon container and animations */
.theme-toggle-icon-container {
  @apply relative flex items-center justify-center;
  @apply w-5 h-5;
  overflow: hidden;
}

.theme-icon {
  @apply absolute inset-0 w-full h-full;
  @apply transition-all duration-300 ease-out;
  @apply text-gray-600 dark:text-gray-400;
}

/* Sun icon animations */
.theme-icon-sun {
  @apply opacity-100 scale-100 rotate-0;
  transform-origin: center;
}

[data-theme="dark"] .theme-icon-sun {
  @apply opacity-0 scale-75 rotate-90;
}

/* Moon icon animations */
.theme-icon-moon {
  @apply opacity-0 scale-75 -rotate-90;
  transform-origin: center;
}

[data-theme="dark"] .theme-icon-moon {
  @apply opacity-100 scale-100 rotate-0;
}

/* Sun rays animation */
.sun-rays {
  @apply transition-all duration-300 ease-out;
  transform-origin: center;
}

[data-theme="dark"] .sun-rays {
  @apply opacity-0 scale-75;
  transform: scale(0.75) rotate(45deg);
}

/* Sun center animation */
.sun-center {
  @apply transition-all duration-300 ease-out;
  transform-origin: center;
}

[data-theme="dark"] .sun-center {
  @apply scale-50 opacity-50;
}

/* Moon shape animation */
.moon-shape {
  @apply transition-all duration-300 ease-out;
  transform-origin: center;
}

.theme-icon-moon .moon-shape {
  @apply scale-75 opacity-0;
}

[data-theme="dark"] .theme-icon-moon .moon-shape {
  @apply scale-100 opacity-100;
}

/* Thumb icon positioning */
.theme-toggle-thumb .theme-icon {
  @apply w-3 h-3;
}

.theme-toggle-thumb .theme-icon-sun {
  @apply text-yellow-500;
}

.theme-toggle-thumb .theme-icon-moon {
  @apply text-blue-400;
}

/* Hover effects */
.theme-toggle-switch:hover .theme-toggle-track {
  @apply bg-gray-300 dark:bg-gray-600;
}

.theme-toggle-switch:hover .theme-toggle-thumb {
  @apply shadow-md dark:shadow-xl;
  @apply scale-105;
}

.theme-toggle--button:hover,
.theme-toggle--icon:hover {
  @apply shadow-sm dark:shadow-lg;
  @apply scale-105;
}

/* Active states */
.theme-toggle-switch:active .theme-toggle-thumb {
  @apply scale-95;
}

.theme-toggle--button:active,
.theme-toggle--icon:active {
  @apply scale-95;
}

/* Transition states */
.theme-toggle.transitioning {
  @apply pointer-events-none;
}

.theme-toggle.transitioning .theme-toggle-thumb {
  @apply transition-transform duration-500 ease-out;
}

.theme-toggle.transitioning .theme-icon {
  @apply transition-all duration-500 ease-out;
}

/* Track background gradient animation */
.theme-toggle-track::before {
  content: '';
  @apply absolute inset-0 rounded-full;
  @apply bg-gradient-to-r from-yellow-200 to-blue-200;
  @apply dark:from-blue-900 dark:to-purple-900;
  @apply opacity-0 transition-opacity duration-300 ease-out;
  z-index: 1;
}

.theme-toggle-switch:hover .theme-toggle-track::before {
  @apply opacity-30;
}

/* Accessibility enhancements */
@media (prefers-reduced-motion: reduce) {
  .theme-toggle-track,
  .theme-toggle-thumb,
  .theme-icon,
  .sun-rays,
  .sun-center,
  .moon-shape {
    transition: none !important;
    animation: none !important;
  }
  
  .theme-toggle-switch:hover .theme-toggle-thumb,
  .theme-toggle--button:hover,
  .theme-toggle--icon:hover {
    transform: none !important;
  }
}

/* High contrast mode */
@media (prefers-contrast: high) {
  .theme-toggle-track {
    @apply border-2 border-current;
  }
  
  .theme-toggle-thumb {
    @apply border-2 border-current;
  }
  
  .theme-toggle--button,
  .theme-toggle--icon {
    @apply border-2 border-current;
  }
}

/* Focus visible enhancements */
.theme-toggle-switch:focus-visible {
  @apply ring-2 ring-offset-2 ring-blue-500 dark:ring-blue-400;
  @apply ring-offset-white dark:ring-offset-gray-900;
}

/* Screen reader only text */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Custom properties for theme-aware styling */
.theme-toggle {
  --toggle-bg-light: theme('colors.gray.200');
  --toggle-bg-dark: theme('colors.gray.700');
  --toggle-thumb-light: theme('colors.white');
  --toggle-thumb-dark: theme('colors.gray.800');
  --toggle-border-light: theme('colors.gray.300');
  --toggle-border-dark: theme('colors.gray.600');
}

/* Luxury variant with enhanced styling */
.theme-toggle--luxury .theme-toggle-track {
  @apply bg-gradient-to-r from-amber-100 to-amber-200;
  @apply dark:from-amber-900 dark:to-yellow-900;
  @apply border-amber-300 dark:border-amber-700;
}

.theme-toggle--luxury .theme-toggle-thumb {
  @apply bg-gradient-to-br from-white to-amber-50;
  @apply dark:from-amber-800 dark:to-amber-900;
  @apply border-amber-200 dark:border-amber-600;
  @apply shadow-amber-200 dark:shadow-amber-900;
}

.theme-toggle--luxury .theme-toggle-thumb .theme-icon-sun {
  @apply text-amber-500;
}

.theme-toggle--luxury .theme-toggle-thumb .theme-icon-moon {
  @apply text-amber-300;
}

/* Animation keyframes for enhanced effects */
@keyframes theme-switch-glow {
  0% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.4); }
  70% { box-shadow: 0 0 0 10px rgba(59, 130, 246, 0); }
  100% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0); }
}

.theme-toggle-switch:focus-visible .theme-toggle-track {
  animation: theme-switch-glow 1.5s infinite;
}

/* Smooth morphing animation for icon transitions */
@keyframes icon-morph {
  0% { transform: scale(1) rotate(0deg); opacity: 1; }
  50% { transform: scale(0.8) rotate(90deg); opacity: 0.5; }
  100% { transform: scale(1) rotate(180deg); opacity: 1; }
}

.theme-toggle.transitioning .theme-icon {
  animation: icon-morph 0.5s ease-out;
}